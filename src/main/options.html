<!-- Copyright (c) 2010 Kenneth Liu. All rights reserved. -->

<html>
<head><title>ChromeItLater Options</title>

<script type="text/javascript">

var USERNAME_KEY = "username";
var PASSWORD_KEY = "password";
var CLOSE_TAB_KEY = "close_tab";
var ADD_INSTANTLY = "add_instantly";

function saveOptions() {
	//TODO trim before saving?	

	if (!username.value || !password.value) return;

	localStorage[USERNAME_KEY] = username.value;
	localStorage[PASSWORD_KEY] = password.value;
	localStorage[CLOSE_TAB_KEY] = close_tab_when_added.checked;
	localStorage[ADD_INSTANTLY] = add_instantly.checked;

	console.debug('saved: ' + username.value + '/' + password.value);

	var status = document.getElementById("status");
	status.innerHTML = "Options Saved.";
}

function restoreOptions() {
	var storedUsername = localStorage[USERNAME_KEY];
	var storedPassword = localStorage[PASSWORD_KEY];
	if (!storedUsername || !storedPassword) return;
	username.value = storedUsername;
	password.value = storedPassword;
	close_tab_when_added.checked = localStorage[CLOSE_TAB_KEY] === 'true' ? true : false;
	add_instantly.checked = localStorage[ADD_INSTANTLY] === 'true' ? true : false;
}

</script>
</head>

<body onload="restoreOptions()">  
	<h1 id="chromeitlater_options">ChromeItLater Options</h1>
	<label for="username">User name</label>
	<input type="text" name="username" value="" id="username"><br/>
	
	<label for="password">Password</label>
	<input type="password" name="password" value="" id="password"><br/>
	
	<p/>                                                           
	<label for="add_instantly">Add instantly</label><input type="checkbox" name="add_instantly" value="" id="add_instantly"><br/>
	
	<label for="close_tab_when_added">Close tab when added</label><input type="checkbox" name="close_tab_when_added" value="" id="close_tab_when_added"><br/>
	
	

	<!-- TODO add way to check password? -->
	<!-- TODO disable save button if options unchanged? -->
	<br/>
	<button onclick="saveOptions()">Save Options</button>
	<div id="status"></div>

	<hr/>
	ChromeItLater (c) 2010 Kenneth Liu<br/>
	<a href="http://www.kenliu.net">http://www.kenliu.net</a><br/>
	
	<p/>Icon by <a href="http://itweek.deviantart.com/">iTweek (Miles Ponson)</a>
</body>
</html>